const version="0.9.6",author="@ovbml",lastEditDate=new Date(Date.UTC(2021,9,21,22,22)),sourceTimezone="MSK",changeList={"0.9.3":["Изменен footer сайта: добавлены иконки к надписям и все разбито по блокам"],"0.9.4":["Орфографические исправления","Добавлен change list","Добавил извинения за формулировки фраз для филологов"],"0.9.5":["Добавлено предупреждение на случай, если картинки не показываются"],"0.9.6":["Добавил изменение параметров при изменении изображения, чтобы можно было дать ссылку другу на уже определенное изображение"]};function getChangesList(){const e=Object.getOwnPropertyNames(changeList);let t="Список изменений:\n";for(let a=0;a<e.length;a++){const o=e[a],n=changeList[o];t+="    • "+o+"\n";for(let e=0;e<n.length;e++)t+="        ○ "+n[e]+";\n";t+="\n"}return t.trim()}function logChangesList(){console.log(getChangesList())}let hrefTools={init(){return this.properties.parent=this,this.search.parent=this,this.hash.parent=this,this},firstSymbol:(e,t)=>(t+="",""===(e+="")||e.startsWith(t)?e:t+e),properties:{set href(e){history.pushState("","",e)},set search(e){this.href=location.origin+location.pathname+this.parent.firstSymbol(e,"?")+location.hash},set hash(e){this.href=location.origin+location.pathname+location.search+this.parent.firstSymbol(e,"#")},get href(){return location.href},get search(){return location.search},get hash(){return location.hash}},search:{from(e){let t={};if(e instanceof Array)e=e.join("&");else if("object"==typeof e)return e;(e+="").startsWith("?")&&(e=e.slice(1)),e=e.split("&");for(let a of e)a=a.split("="),1===a.length?t[a[0]]=!0:t[a[0]]=a[1];return t},toStr(e){let t=[];for(let a in e){let o=e[a];t=!0===o?t.concat(a):t.concat(`${a}=${o}`)}return t.join("&")},get(){return this.from(location.search)},set(e){if("string"==typeof e)this.parent.properties.search=e;else{if("object"!=typeof e)return!1;this.parent.properties.search=this.toStr(this.from(e))}return location.search},clear(){this.set("")},update(e){return!0!==(e=this.from(e))[""]&&this.set(Object.assign(this.get(),e))},del(...e){let t={},a=this.get();for(let o of e)t[o]=a[o],delete a[o];return this.set(a),t},toggle(e){let t=this.get()[e];return t&&"false"!==t?(this.update(`${e}=false`),!1):(this.update(`${e}`),!0)}},hash:{get:()=>location.hash,set(e){return this.parent.properties.hash=e},clear(){this.set("")},toggle(e){return location.hash===this.parent.firstSymbol(e,"#")?(this.clear(),!1):(this.set(e),!0)}},clear(){this.search.clear(),this.hash.clear()}}.init();const galeryData={oneImgBlock:{self:document.querySelector(".one-image-galery"),title:document.querySelector(".one-image-galery__information-title"),img_container:document.querySelector(".one-image-galery__image"),img:document.querySelector(".one-image-galery__image img"),a:document.querySelector(".one-image-galery__image a"),photoCount:document.querySelector(".one-image-galery__photo-count"),photoNumber:document.querySelector(".one-image-galery__photo-number")},folderPath:"img/galery images/",loop:!0,currentImgIndex:1,imagesCount:53,initScale:1.5,scale:1.5,maxScale:2,minScale:.5,1:{title:"Закат в поле"},2:{title:"Закат над водой"},3:{title:"Вид из окна 9го этажа"},4:{title:"Горение свечи",oneItem:!0},5:{title:"Частный сектор из 4го этажа"},6:{title:"Река Днепр"},7:{title:"Закат возле Днепра"},8:{title:"Зима",oneItem:!0},9:{title:"Огни в ночи"},10:{title:"Ночной вид из окна дома"},11:{title:"Туман"},12:{title:"Ночь из окна 7го этажа"},13:{title:"Цветок на окне"},14:{title:"В траве у воды"},15:{title:"Ночь, луна и закат"},16:{title:"Закат в тумане"},17:{title:"Разделение неба"},18:{title:"Солнце из окна машины"},19:{title:"Дерево",oneItem:!0},20:{title:"Розовое небо"},21:{title:"Дерево с розовым небом",oneItem:!0},22:{title:"Дом  с розовым небом",oneItem:!0},23:{title:"Закат на Днепре"},24:{title:"Розовый Днепр"},25:{title:"На берегу Днепра"},26:{title:"Двойная радуга"},27:{title:"Красный асфальт",oneItem:!0},28:{title:"Оранжевый дом"},29:{title:"Розовая даль"},30:{title:"После дождя",oneItem:!0},31:{title:"Красивые тучи"},32:{title:"Радуга"},33:{title:"Фиолетовая вода и трава"},34:{title:"Красная вода"},35:{title:"Гриб и листья в траве"},36:{title:"Гриб крупным планом",oneItem:!0},37:{title:"Гриб общим планом",oneItem:!0},38:{title:"Гриб и трава общим планом"},39:{title:"Красивое небо"},40:{title:"Зимний вечер"},41:{title:"Отражение света на льду"},42:{title:"Новогодняя гирлянда"},43:{title:"Стеклопакет",oneItem:!0},44:{title:"Трава свысока",oneItem:!0},45:{title:"Желтые деревья"},46:{title:"Трава и желтые деревья"},47:{title:"В траве",oneItem:!0},48:{title:"Красивый закат из дома"},49:{title:"Красивый закат с другого ракурса"},50:{title:"Яркий красивый закат"},51:{title:"Закат в дали"},52:{title:"Закат на озере"},53:{title:"Поле"}};function getTopOffsetOf(e){const t=e.getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop;return t.top+a}function itemOnScreen(e,t=4){const a=e.offsetHeight,o=getTopOffsetOf(e);let n=window.innerHeight-a/t;return a>window.innerHeight&&(n=window.innerHeight-window.innerHeight/t),(window.pageYOffset||document.documentElement.scrollTop)>o-n&&(window.pageYOffset||document.documentElement.scrollTop)<o+a}const animClass="_anim-item",noHideClass="_anim-no-hide",activeClass="_anim-active",animStartCoefficient=4,firstCheckDelay=300,enableAnim=!0,animItems=document.querySelectorAll("."+animClass);function checkAnim(){for(let e=0;e<animItems.length;e++){const t=animItems[e];itemOnScreen(t,animStartCoefficient)?t.classList.add(activeClass):t.classList.contains(noHideClass)||t.classList.remove(activeClass)}}function unactiveAllAnim(){const e=document.querySelectorAll("."+activeClass);for(index=0;index<e.length;index++){e[index].classList.remove(activeClass)}}function activeAllAnim(){for(let e=0;e<animItems.length;e++)animItems[e].classList.add(activeClass)}animItems.length>0&&enableAnim&&(window.addEventListener("scroll",checkAnim),setTimeout(checkAnim,firstCheckDelay));const spolerClasses={block:"spolers",spoler:"spolers__spoler",label:"spolers__label",items:"spolers__items",item:"spolers__item",active:"_active-spoler",shown:"_shown-spoler",oneSpoler:"_one-spoler"},spolerDatasetNames={animDuration:"animDuration",enableDelay:"enableDelay",startDelay:"startDelay",delayStep:"delayStep"},defaultSpolerDatesetValues={animDuration:300,enableDelay:!1,startDelay:0,delayStep:300},spolerBlocks=document.querySelectorAll("."+spolerClasses.block);for(let bi=0;bi<spolerBlocks.length;bi++){function getValue(propName){const value=block.dataset[spolerDatasetNames[propName]],defaultValue=defaultSpolerDatesetValues[propName];return eval(value||defaultValue)}const block=spolerBlocks[bi],spolers=block.querySelectorAll("."+spolerClasses.spoler),animDuration=getValue("animDuration"),enableDelay=getValue("enableDelay"),startDelay=getValue("startDelay"),delayStep=getValue("delayStep");for(let e=0;e<spolers.length;e++){function slideUp(e){const t=e.parentNode;e.style.height=e.scrollHeight-2+"px",setTimeout((function(){e.style.height="0px"}),0),t.classList.remove(spolerClasses.active),setTimeout((function(){t.classList.remove(spolerClasses.shown)}),animDuration)}function slideDown(e){const t=e.parentNode;e.style.height=e.scrollHeight-2+"px",t.classList.add(spolerClasses.active),setTimeout((function(){t.classList.add(spolerClasses.shown),e.style.height="auto"}),animDuration)}const t=spolers[e],a=t.querySelector("."+spolerClasses.label),o=t.querySelector("."+spolerClasses.items),n=o.querySelectorAll("."+spolerClasses.item);let l=startDelay;if(enableDelay)for(let e=0;e<n.length;e++){const t=n[e];t.style.transitionDelay=l+"ms",l+=delayStep}a.onclick=function(){if(block.classList.contains(spolerClasses.oneSpoler)){const e=block.querySelectorAll("."+spolerClasses.shown);for(let a=0;a<e.length;a++){const o=e[a],n=o.querySelector("."+spolerClasses.items);o!==t&&slideUp(n)}}t.classList.contains(spolerClasses.shown)?slideUp(o):slideDown(o)},t.classList.contains(spolerClasses.shown)||slideUp(o)}}const header=document.querySelector("header.header"),imagesCount=7,delay=10500;let imageIndex=1;function setHeaderImage(e){function t(e){document.querySelector(".header__image_"+imageIndex).style.opacity=""+e}t(0),imageIndex=e,imageIndex==imagesCount+1?imageIndex=1:imageIndex<1&&(imageIndex=imagesCount),t(1)}function prevHedaerImage(){setHeaderImage(imageIndex-1)}function nextHeaderImage(){setHeaderImage(imageIndex+1)}setTimeout((function e(){nextHeaderImage(),setTimeout(e,delay)}),delay),header.onclick=function(e){const t=e.screenX,a=header.scrollWidth,o=.2*a;t<=o?prevHedaerImage():t>=a-o&&nextHeaderImage()};let startMovePoint=null;header.addEventListener("touchmove",(function(e){null===startMovePoint&&(startMovePoint=e.changedTouches[0].clientX)})),header.addEventListener("touchend",(function(e){if(null===startMovePoint)return;const t=e.changedTouches[0].clientX;startMovePoint-t<-100?prevHedaerImage():startMovePoint-t>100&&nextHeaderImage(),startMovePoint=null}));const descriptionItems=document.querySelectorAll(".description__item");descriptionItems[0].childNodes[1].style.height="auto",descriptionItems[0].childNodes[1].classList.add("_active-spoler");for(let e=0;e<descriptionItems.length;e++){const t=descriptionItems[e],a=t.childNodes[0],o=t.childNodes[1]}let blockArrowAnim=!1;function rotateArrow(e,t){blockArrowAnim||(blockArrowAnim=!0,t.style.animationName=e,t.style.animationPlayState="running",setTimeout((function(e){e.style.animationName="",blockArrowAnim=!1}),1e3,t))}document.querySelector(".one-image-galery__arrow_prev").onclick=function(){rotateArrow("rotate-prev-arrow",this),prevImg()},document.querySelector(".one-image-galery__arrow_next").onclick=function(){rotateArrow("rotate-next-arrow",this),nextImg()},galeryData.oneImgBlock.img.alt="Фотография",galeryData.oneImgBlock.photoCount.innerText=galeryData.imagesCount;const searchImageIndex=hrefTools.search.get().image;function setImage(e){const t=galeryData.oneImgBlock.title,a=galeryData.oneImgBlock.img_container,o=galeryData.oneImgBlock.img,n=galeryData.oneImgBlock.a,l=galeryData.imagesCount;if(galeryData.loop)e<1?e=l:e>l&&(e=1);else if(e<1||e>l)return;hrefTools.search.set({image:e}),t.classList.add("_change"),a.classList.add("_change"),setTimeout((function(){a.style.height=o.scrollHeight+20+"px",galeryData.currentImgIndex=e,galeryData.oneImgBlock.photoNumber.value=galeryData.currentImgIndex,t.innerText=galeryData[e].title,o.src=galeryData.folderPath+e+".webp",n.href=galeryData.folderPath+e+".webp",a.style.height=o.scrollHeight+20+"px",setTimeout((function(){a.style.height="auto",t.classList.remove("_change"),a.classList.remove("_change")}),400)}),300)}function nextImg(){setImage(galeryData.currentImgIndex+1)}function prevImg(){setImage(galeryData.currentImgIndex-1)}function addOnWheel(e,t){e.addEventListener?"onwheel"in document?e.addEventListener("wheel",t):"onmousewheel"in document?e.addEventListener("mousewheel",t):e.addEventListener("MozMousePixelScroll",t):e.attachEvent("onmousewheel",t)}isNaN(searchImageIndex)?setImage(galeryData.currentImgIndex):setImage(+searchImageIndex),galeryData.oneImgBlock.photoNumber.onchange=function(){let e=+this.value;if(isNaN(e)||e<1||e>galeryData.imagesCount)return this.value=galeryData.currentImgIndex;setImage(e)},addOnWheel(galeryData.oneImgBlock.img_container,(function(e){const t=(e.deltaY||e.detail||e.wheelDelta)/1e3,a=galeryData.maxScale,o=galeryData.minScale;let n=galeryData.scale;n-=t,n=t>0?Math.max(o,n):Math.min(a,n),e.altKey||(galeryData.scale=n,galeryData.oneImgBlock.img.style.transform=`scale(${n})`,e.preventDefault(),this.onmousemove(e))})),galeryData.oneImgBlock.img_container.onmousemove=function(e,t=1){const a=galeryData.oneImgBlock.img,o=galeryData.oneImgBlock.img_container;let n=5*(galeryData.maxScale-galeryData.scale);n=Math.max(n,.4);const l=o.getBoundingClientRect(),i=(e.clientX-l.x-o.clientWidth/2)/n,s=(e.clientY-l.y-o.clientHeight/2)/n;a.style.right=Math.min(Math.abs(i),o.clientWidth/2)*Math.sign(i)*t+"px",a.style.bottom=Math.min(Math.abs(s),o.clientHeight/2)*Math.sign(s)*t+"px"},galeryData.oneImgBlock.img_container.onmouseleave=function(){galeryData.oneImgBlock.img.style.transform="",galeryData.oneImgBlock.img.style.right="",galeryData.oneImgBlock.img.style.bottom="",galeryData.scale=galeryData.initScale},galeryData.oneImgBlock.img_container.addEventListener("touchmove",(function(e){if(1==e.targetTouches.length){const t={clientX:e.targetTouches[0].clientX,clientY:e.targetTouches[0].clientY};this.onmousemove(t,-1)}else if(2==e.targetTouches.length){const t=galeryData.maxScale/300,a={x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY},o={x:e.targetTouches[1].clientX,y:e.targetTouches[1].clientY};let n=Math.sqrt((o.x-a.x)**2+(o.y-a.y)**2)*t;n<galeryData.minScale?n=galeryData.minScale:n>galeryData.maxScale&&(n=galeryData.maxScale),galeryData.scale=n,galeryData.oneImgBlock.img.style.transform=`scale(${n})`,this.onmousemove(event)}this.classList.add("_hover"),e.preventDefault()})),galeryData.oneImgBlock.img_container.addEventListener("touchend",(function(e){e.targetTouches.length>0||(this.classList.remove("_hover"),this.onmouseleave())}));const toup=document.querySelector(".footer__up"),todescription=document.querySelector(".footer__description"),description=document.querySelector(".description"),togalery=document.querySelector(".footer__galery"),galery=document.querySelector(".galery"),tocontacts=document.querySelectorAll(".description__link");function animScrollY(e,t=10,a=10){const o=window.pageYOffset||document.documentElement.scrollTop,n=e-o;if(Math.sign(t)!==Math.sign(n)&&(t*=-1),0!==t&&0!==n)if(Math.abs(n)>Math.abs(t)){window.scrollBy(0,t);if((window.pageYOffset||document.documentElement.scrollTop)===o)return;setTimeout(animScrollY,a,e,t,a)}else window.scrollBy(0,n)}function animScrollYTime(e,t=300,a=10){animScrollY(e,(e-(window.pageYOffset||document.documentElement.scrollTop))/(t/a),a)}toup.onclick=function(){animScrollYTime(0,150)},todescription.onclick=function(){animScrollYTime(getTopOffsetOf(description),150)},togalery.onclick=function(){animScrollYTime(getTopOffsetOf(galery),150)};
